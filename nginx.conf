# ./nginx.conf
events {}

http {
  # 可选：更友好的默认类型
  include       mime.types;
  default_type  application/octet-stream;
  sendfile      on;

  # 80 端口（HTTP）反向代理到 app
  server {
    listen 80;
    server_name _;

    location / {
      proxy_pass http://solocloud:8080;
      proxy_set_header Host              $host;
      proxy_set_header X-Real-IP         $remote_addr;
      proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
    }
  }

  # 如有证书，启用 443；没有就先把这个 server 注释掉
  # server {
  #   listen 443 ssl;
  #   server_name _;
  #   ssl_certificate     /etc/nginx/ssl/server.crt;
  #   ssl_certificate_key /etc/nginx/ssl/server.key;
  #
  #   location / {
  #     proxy_pass http://solocloud:8080;
  #     proxy_set_header Host              $host;
  #     proxy_set_header X-Real-IP         $remote_addr;
  #     proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
  #     proxy_set_header X-Forwarded-Proto $scheme;
  #   }
  # }
}